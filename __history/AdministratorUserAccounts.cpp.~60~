//---------------------------------------------------------------------------

#include <fmx.h>
#pragma hdrstop

#include "School.h"
#include "Administrator.h"
#include "AdministratorHome.h"
#include "AdministratorUserAccounts.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma link "AdministratorUIParent"
#pragma resource "*.fmx"
TAdministratorUserAccountsForm *AdministratorUserAccountsForm;
//---------------------------------------------------------------------------
__fastcall TAdministratorUserAccountsForm::TAdministratorUserAccountsForm(TComponent* Owner)
	: TAdministratorUIParentForm(Owner)
{
}
//---------------------------------------------------------------------------
void __fastcall TAdministratorUserAccountsForm::PopulateGridWithAdministrators(const std::vector<std::unique_ptr<User>>& administrators)
{
	// Set the row count based on the number of administrators
	StringGrid1->RowCount = administrators.size() + 1; // Adding 1 for the header row

	// Add headers for the columns
	StringGrid1->UserID->Header = "User ID";
	StringGrid1->Cells[1][0] = "Email";
    StringGrid1->Cells[2][0] = "Password";
	StringGrid1->Cells[3][0] = "First Name";
    StringGrid1->Cells[4][0] = "Last Name";
    StringGrid1->Cells[5][0] = "Gender";
	StringGrid1->Cells[6][0] = "Date of Birth";
	StringGrid1->Cells[7][0] = "Phone Number";
	StringGrid1->Cells[8][0] = "Address";
    StringGrid1->Cells[9][0] = "Security Question";
	StringGrid1->Cells[10][0] = "Security Answer";
	StringGrid1->Cells[11][0] = "Blocked?";

	for (int i=0; i < administrators.size(); i++)
	{
		User* admin = administrators[i].get();

		StringGrid1->Cells[0][i+1] = admin->GetUserID().c_str();
        StringGrid1->Cells[1][i+1] = admin->GetEmail().c_str();
		StringGrid1->Cells[2][i+1] = admin->GetPassword().c_str();
		StringGrid1->Cells[3][i+1] = admin->GetFirstName().c_str();
		StringGrid1->Cells[4][i+1] = admin->GetLastName().c_str();
        StringGrid1->Cells[5][i+1] = admin->GetGender().c_str();
        StringGrid1->Cells[6][i+1] = admin->GetDateOfBirth().c_str();
		StringGrid1->Cells[7][i+1] = admin->GetPhoneNumber().c_str();
		StringGrid1->Cells[8][i+1] = admin->GetAddress().c_str();
		StringGrid1->Cells[9][i+1] = admin->GetSecurityQuestion().c_str();
		StringGrid1->Cells[10][i+1] = admin->GetSecurityAnswer().c_str();
		StringGrid1->Cells[11][i+1] = admin->GetIsBlocked() ? "True" : "False";
	}
}

void __fastcall TAdministratorUserAccountsForm::FormCreate(TObject *Sender)
{
	PopulateGridWithAdministrators(School::GetInstance().GetAdministrators());
	//AdjustColumnWidths();
}
//---------------------------------------------------------------------------

