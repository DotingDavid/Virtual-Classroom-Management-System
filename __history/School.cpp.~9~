//---------------------------------------------------------------------------

#pragma hdrstop

#include <fstream>
#include "School.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)

School* School::Instance = nullptr; // Initialize the instance pointer

School& School::GetInstance() {
    if(Instance == nullptr) {
        Instance = new School("Horizon Middle School");
    }
    return *Instance;
}

void School::AddAdministrator(std::unique_ptr<User> admin) {
    Administrators.push_back(std::move(admin));
}

void School::SaveUsers() {
    fstream AdminInfoFile;
    AdminInfoFile.open("AdminInfo.txt", ios::app);
    if(AdminInfoFile.is_open()) {

        for(auto& admin : Administrators) {
            AdminInfoFile << admin.JobTitle << "," << admin.Email << "," << admin.Password << ","
            << admin.FirstName << "," << admin.LastName << "," << admin.Birthdate << ","
            << admin.PhoneNumber << "," << admin.Address << "," << admin.SecurityQuestion << ","
            << admin.SecurityAnswer << std::endl;
        }

        AdminInfoFile.close();
    }
}

void School::LoadUsers() {
    fstream AdminInfoFile;
    AdminInfoFile.open("AdminInfo.txt", ios::in);
    if(AdminInfoFile.is_open()) {

    }
}

